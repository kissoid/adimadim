<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:fragment rendered="#{managementMainPageBean.activeFragment eq 'teamManager' ? true: false}">
        <p:toolbar style="margin-bottom: 5px;">
            <p:toolbarGroup align="left">
                <p:commandButton id="newTeam" value="Yeni Takım" oncomplete="createTeamDialog.show();" /> 
                <p:spacer/>
                <p:commandButton id="editTeam" value="Takımı Düzelt" oncomplete="updateTeamDialog.show();" update=":updateTeamDialogForm:updateTeam_teamName" /> 
                <p:spacer/>
                <p:commandButton id="deleteTeam" value="Takımı Sil" actionListener="#{raceBean.deleteTeam}" update=":mainForm:" /> 
                <p:spacer/>
                <p:commandButton id="teamMembers" value="Takım Üyelerini Göster" actionListener="#{raceBean.retriveTeamScoreByRaceIdAndTeamId}" update=":mainForm:teamMemberTable" /> 
            </p:toolbarGroup>
        </p:toolbar> 
        <p:dataTable id="teamTable" var="team" value="#{raceBean.teamList}" widgetVar="teamTableWidget" emptyMessage="Takım bulunamadı" rows="10" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" selection="#{raceBean.selectedTeam}" rowKey="#{team.teamPK.teamId}" style="margin-bottom: 20px;">  
            <f:facet name="header">  
                <h:outputText value="Takım Listesi"/>   
            </f:facet>  

            <p:column selectionMode="single" style="width:20px;" />  
            <p:column id="teamNoColumn" filterBy="#{team.teamPK.teamId}" sortBy="#{team.teamPK.teamId}" headerText="Takım No" filterStyle="width:75px;" width="75" filterMatchMode="exact">  
                <h:outputText value="#{team.teamPK.teamId}" style="float: right;"/>  
            </p:column>  

            <p:column id="tamNameColumn" filterStyle="width:520px;" filterBy="#{team.teamName}" sortBy="#{team.teamName}"  headerText="Takım Adı" width="520" filterMatchMode="contains">  
                <h:outputText value="#{team.teamName}" />  
            </p:column>  
        </p:dataTable>  

        <p:dataTable id="teamMemberTable" var="member" value="#{raceBean.teamMemberList}" widgetVar="teamMemberTableWidget" emptyMessage="Yarışçı bulunamadı" rows="10" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false">  
            <f:facet name="header">  
                <h:outputText value="Takım Koşucuları"/>  
            </f:facet>  

            <p:column id="racerIdColumn" filterBy="#{member.teamMemberPK.accountId}" sortBy="#{member.teamMemberPK.accountId}" headerText="No" width="50" filterStyle="width:50px;" filterMatchMode="exact">  
                <h:outputText value="#{member.teamMemberPK.accountId}" style="float: right;"/>  
            </p:column>  

            <p:column id="racerNameColumn" filterBy="#{member.account.name}" sortBy="#{member.account.name}" headerText="Ad" width="75" filterStyle="width:75px;" filterMatchMode="contains">
                <h:outputText value="#{member.account.name}" style="float: right;"/>  
            </p:column>  

            <p:column id="racerSurnameColumn" filterBy="#{member.account.surname}" sortBy="#{member.account.surname}" headerText="Soyad" width="75" filterStyle="width:75px;" filterMatchMode="contains">
                <h:outputText value="#{member.account.surname}" style="float: right;"/>  
            </p:column>  
        </p:dataTable>  
    </ui:fragment>
</html>

